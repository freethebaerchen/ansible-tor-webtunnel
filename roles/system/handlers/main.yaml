- name: Restart ssh
  service:
    name: ssh
    state: restarted
    enabled: true

- name: Restart crond
  ansible.builtin.service:
    name: crond
    state: restarted
    enabled: true

- name: Restart dnf-automatic
  ansible.builtin.service:
    name: dnf-automatic.timer
    state: restarted
    enabled: true

- name: Restart system
  ansible.builtin.reboot:
    msg: "Reboot initiated by Ansible for setting the hostname"
    reboot_timeout: 300

- name: Apply pf rules
  ansible.builtin.shell:
    cmd: pfctl -f {{ system.etc }}/pf.conf

- name: Apply ip4tables rules
  ansible.builtin.shell:
    cmd: iptables-restore < {{ system.etc }}/iptables/ip4tables_rules

- name: Apply ip4tables rules
  ansible.builtin.shell:
    cmd: iptables-restore < {{ system.etc }}/iptables/ip6tables_rules